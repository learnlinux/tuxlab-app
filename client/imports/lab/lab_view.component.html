<!-- Lab Component -->
<div class="tuxlab-lab-view" fxLayout fxLayoutAlign="center flex-start" *ngIf="(session | async); else loading">

  <!-- Markdown Component -->
  <div>

    <!-- Toolbar -->
    <md-toolbar>
      <button md-icon-button (click)="task_index = (task_index > 0) ? task_index - 1 : task_index"><md-icon>arrow_back</md-icon></button>

      <span class="center-text">
        <span class="number">{{ task_index + 1 }}</span>
        {{ (lab | async)?.tasks[task_index]?.name }}
      </span>

      <span>
        <button *ngIf="task_index < (session | async)?.current_task" md-icon-button (click)="task_index = task_index + 1" ><md-icon>arrow_forward</md-icon></button>
        <button *ngIf="task_index >= (session | async)?.current_task" md-icon-button (click)="check"><md-icon>check</md-icon></button>
      </span>

    </md-toolbar>

    <!-- Content -->
    <markdown>
      {{ (lab | async)?.tasks[task_index].md }}
    </markdown>

  </div>

  <!-- Terminal Component -->
  <div>
    <md-toolbar>
      <span class="spacer"></span>
      <button md-icon-button (click)="openConnectionDetails()"><md-icon>dns</md-icon></button>
      <button md-icon-button><md-icon>refresh</md-icon></button>
    </md-toolbar>

    <tuxlab-terminal></tuxlab-terminal>
  </div>
</div>

<!-- Loading Spinner -->
<ng-template #loading>
  <div class="loading" fxLayout="column" fxLayoutAlign="center center">
    <div><h2> {{ (lab | async)?.name }} </h2></div>
    <md-progress-spinner color="primary" mode="indeterminate"></md-progress-spinner>
  </div>
</ng-template>
